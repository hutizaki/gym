@using gymtrack.Services
@inject DateService DateService

@code {
    [Parameter] public int Year { get; set; }
    [Parameter] public int Month { get; set; }

    private List<DateTime?> days = new();
    private static readonly string[] Weekdays = new[]{"S", "M", "T", "W", "T", "F", "S"};
    private string MonthName => new DateTime(Year, Month, 1).ToString("MMMM yyyy");

    protected override void OnParametersSet()
    {
        days = DateService.GenerateMonthDays(Year, Month);
    }
}

<div class="month">
    <div class="month-header">@MonthName</div>
    <div class="weekdays">
        @foreach (var wd in Weekdays)
        {
            <div class="weekday">@wd</div>
        }
    </div>
    <div class="days-grid">
        @foreach (var day in days)
        {
            var isOtherMonth = day.HasValue && day.Value.Month != Month;
            var isToday = day.HasValue && day.Value.Date == DateTime.Today;
            <div class="day @(isOtherMonth ? "other-month" : "") @(isToday ? "today" : "")">
                @if (day.HasValue)
                {
                    @day.Value.Day
                }
            </div>
        }
    </div>
</div>
